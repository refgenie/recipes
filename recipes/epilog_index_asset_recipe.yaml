name: epilog_index
version: 0.0.1
output_asset_class: epilog_index
description: Genome index for CpG sites, produced by the epilog DNA methylation caller
input_files: {}
input_params:
  context:
    default: CG
    description:
      Substring to index. One or more space-separated strings to index.
      e.g. 'CG' or 'CG CA CT CC'
input_assets:
  fasta:
    asset_class: fasta
    default: fasta
    description: fasta asset for genome
docker_image: databio/refgenie
command_templates:
  - epilog index -- --infile {{values.assets["fasta"].seek_keys_dict["fasta"]}} --outfile {{values.output_folder}}/{{values.genome_digest}}_{{values.params["context"]}}.tsv
    --contexts {{values.params["context"]}}
  - bgzip {{values.output_folder}}/{{values.genome_digest}}_{{values.params["context"]}}.tsv
  - tabix -s 1 -b 2 -e 2 {{values.output_folder}}/{{values.genome_digest}}_{{values.params["context"]}}.tsv.gz
custom_properties:
  version: ""
default_tag: "{{values.custom_properties.version}}"
