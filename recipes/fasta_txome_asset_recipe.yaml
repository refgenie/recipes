name: fasta_txome
version: 0.0.1
output_asset_class: fasta
description:
  cDNA sequences in the FASTA format, indexed FASTA (produced with samtools
  index) and chromosome sizes file
input_files:
  fasta_txome:
    description: A taxome FASTA file. Gzipped or not.
input_params: {}
input_assets: {}
docker_image: docker.io/databio/refgenie
command_templates:
  - cp {{values.files["fasta_txome"]}} {{values.output_folder}}/{{values.genome_digest}}.fa.gz
  - if (file {{values.output_folder}}/{{values.genome_digest}}.fa.gz | grep -q compressed ) ; then gzip -df {{values.output_folder}}/{{values.genome_digest}}.fa.gz ; else mv {{values.output_folder}}/{{values.genome_digest}}.fa.gz {{values.output_folder}}/{{values.genome_digest}}.fa ; fi
  - samtools faidx {{values.output_folder}}/{{values.genome_digest}}.fa
  - cut -f 1,2 {{values.output_folder}}/{{values.genome_digest}}.fa.fai > {{values.output_folder}}/{{values.genome_digest}}.chrom.sizes
custom_properties:
  version: "samtools --version-only | awk -F+ '{print $1}'"
default_asset: "samtools-{{values.custom_properties.version}}"
